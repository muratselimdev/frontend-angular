import{a as We}from"./chunk-YDWFSCZA.js";import{d as $e,e as Ke,f as Ze,g as Ye}from"./chunk-7ZNSU26O.js";import"./chunk-A35KAJYI.js";import{a as I}from"./chunk-H24DLGSG.js";import{$a as xe,$b as ze,Ab as Be,Cb as Ge,Db as w,Ea as m,Fa as o,Fb as ae,Ga as n,Gb as F,Ha as c,Hb as _,Ia as Y,Ib as q,Ja as W,Jb as B,K as k,Ka as b,L as te,La as f,Lb as Le,Ma as u,Mb as G,N as P,Ob as L,Pb as U,Q as h,Qa as qe,Qb as j,R as C,Ra as ne,Rb as H,S as Ae,Sa as oe,Sb as z,Ta as M,Wb as $,X as Fe,Xa as s,Xb as Ue,Ya as x,Yb as je,Za as v,_a as re,_b as He,a as Ee,ab as ye,ac as R,b as Te,bb as Se,bc as K,dc as J,e as ee,eb as Ie,ec as S,ga as Z,gb as Pe,ha as l,hb as N,ib as D,kb as O,lb as ke,ma as g,mc as le,pa as y,pb as se,qa as ie,qb as V,rb as A,sb as Ne,ta as p,tb as De,u as Me,vb as Ve,z as Oe}from"./chunk-IU75DD4N.js";var me=class i{constructor(t,e){this.auth=t;this.router=e}customerName=null;ngOnInit(){let t=localStorage.getItem("customerProfile");if(t){let e=JSON.parse(t);this.customerName=`${e.firstName} ${e.lastName}`}}logout(){this.auth.logout().subscribe({next:()=>{localStorage.removeItem("customerProfile"),this.router.navigate(["/customer/login"],{queryParams:{loggedOut:"true"}})},error:t=>console.error("Logout hatas\u0131",t)})}static \u0275fac=function(e){return new(e||i)(g(I),g(R))};static \u0275cmp=y({type:i,selectors:[["app-customer-layout"]],standalone:!1,decls:23,vars:1,consts:[[1,"bg-white","shadow-sm","px-4","py-3"],[1,"flex","items-center","justify-between"],["routerLink","/customer/dashboard",1,"font-bold","text-blue-600","text-xl"],["src","logo.png",1,"login-logo"],[1,"flex","space-x-6"],["routerLink","/customer/requests",1,"text-gray-700","hover:text-blue-600","transition-colors"],["routerLink","/customer/profile",1,"text-gray-700","hover:text-blue-600","transition-colors"],["routerLink","/customer/requests/new",1,"text-gray-700","hover:text-blue-600","transition-colors"],[1,"flex","items-center","space-x-4"],[1,"text-gray-600","font-semibold"],[1,"text-gray-900"],[1,"border","border-red-500","text-red-500","hover:bg-red-500","hover:text-white","px-3","py-1","rounded","text-sm","transition-colors","duration-200",3,"click"],[1,"max-w-7xl","mx-auto","px-4","mt-6"]],template:function(e,r){e&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),c(3,"img",3),n(),o(4,"ul",4)(5,"li")(6,"a",5),s(7,"Taleplerim"),n()(),o(8,"li")(9,"a",6),s(10,"Profilim"),n()(),o(11,"li")(12,"a",7),s(13,"\u2795 Yeni Talep"),n()()(),o(14,"div",8)(15,"span",9),s(16," \u{1F44B} Ho\u015F geldiniz, "),o(17,"span",10),s(18),n()(),o(19,"button",11),f("click",function(){return r.logout()}),s(20,"\u{1F6AA} \xC7\u0131k\u0131\u015F Yap"),n()()()(),o(21,"div",12),c(22,"router-outlet"),n()),e&2&&(l(18),x(r.customerName))},dependencies:[ze,K],styles:[".navbar[_ngcontent-%COMP%]{border-radius:0 0 12px 12px}.navbar-brand[_ngcontent-%COMP%]{font-size:1.3rem}.nav-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px}.login-logo[_ngcontent-%COMP%]{max-width:220px;height:auto}"]})};var de=class i{constructor(t,e,r){this.http=t;this.auth=e;this.router=r}treatmentGroups=[];treatments=[];selectedGroupId;selectedTreatmentId;loading=!1;customerName=null;ngOnInit(){this.loadCustomerProfile(),this.loadTreatmentGroups()}loadTreatmentGroups(){this.http.get(`${S.apiUrl}/api/treatments/groups`).subscribe({next:t=>this.treatmentGroups=t,error:t=>console.error("Tedavi gruplar\u0131 al\u0131namad\u0131",t)})}loadCustomerProfile(){let t=localStorage.getItem("customerProfile");if(t){let e=JSON.parse(t);this.customerName=`${e.firstName} ${e.lastName}`}}onGroupChange(){this.selectedGroupId&&this.http.get(`${S.apiUrl}/api/treatments/group/${this.selectedGroupId}`).subscribe({next:t=>this.treatments=t,error:t=>console.error("Tedaviler al\u0131namad\u0131",t)})}submitSelection(){if(!this.selectedTreatmentId){alert("L\xFCtfen bir tedavi se\xE7iniz.");return}console.log("Se\xE7ilen grup:",this.selectedGroupId,"tedavi:",this.selectedTreatmentId)}logout(){this.auth.logout().subscribe({next:()=>{localStorage.removeItem("customerProfile"),this.router.navigate(["/customer/login"],{queryParams:{loggedOut:"true"}})},error:t=>console.error("Logout hatas\u0131",t)})}static \u0275fac=function(e){return new(e||i)(g(w),g(I),g(R))};static \u0275cmp=y({type:i,selectors:[["app-customer-dashboard"]],standalone:!1,decls:1,vars:0,consts:[["id","remoteAudio","autoplay",""]],template:function(e,r){e&1&&c(0,"audio",0)},styles:[".container[_ngcontent-%COMP%]{max-width:500px}.card[_ngcontent-%COMP%]{border-radius:16px;background-color:#fdfdfd}select[_ngcontent-%COMP%]{border-radius:10px}"]})};var tt=["localAudio"],it=["remoteAudio"],nt=["chatBox"],ot=(i,t,e,r)=>({"badge bg-warning text-dark":i,"badge bg-success":t,"badge bg-secondary":e,"badge bg-info":r}),Je=i=>({"text-end":i});function rt(i,t){if(i&1){let e=b();o(0,"app-call-incoming-modal",18),f("accept",function(){h(e);let a=u();return C(a.onAcceptCall())})("reject",function(){h(e);let a=u();return C(a.onRejectCall())}),n()}if(i&2){let e=u();m("visible",e.incomingVisible)("callerName",e.callerName)}}function st(i,t){if(i&1){let e=b();o(0,"div",19),s(1," \u{1F399}\uFE0F Arama devam ediyor... "),o(2,"button",20),f("click",function(){h(e);let a=u();return C(a.endCall())}),c(3,"i",21),s(4," Durdur "),n()()}}function at(i,t){if(i&1){let e=b();o(0,"tr")(1,"td"),s(2),n(),o(3,"td"),s(4),n(),o(5,"td")(6,"span",22),s(7),n()(),o(8,"td"),s(9),N(10,"date"),n(),o(11,"td"),s(12),n(),o(13,"td")(14,"button",23),f("click",function(){let a=h(e).$implicit,d=u();return C(d.openDetails(a))}),c(15,"i",24),s(16," Detay "),n(),o(17,"button",25),f("click",function(){let a=h(e).$implicit,d=u();return C(d.cancelRequest(a))}),c(18,"i",26),s(19," \u0130ptal Et "),n()()()}if(i&2){let e=t.$implicit;l(2),x(e.groupName),l(2),x(e.treatmentName),l(2),m("ngClass",Pe(10,ot,e.status==="Pending",e.status==="Completed",e.status==="Cancelled",e.status==="New")),l(),v(" ",e.status," "),l(2),x(D(10,7,e.createdAt,"short")),l(3),x(e.notes||"-"),l(5),m("disabled",e.status!=="New"&&e.status!=="Pending")}}function lt(i,t){i&1&&(o(0,"div",27),s(1," Hen\xFCz bir talebiniz bulunmuyor. "),n())}function mt(i,t){i&1&&c(0,"div",28)}function ct(i,t){if(i&1&&(o(0,"div",72)(1,"strong"),s(2,"\u0130ptal Sebebi:"),n(),s(3),c(4,"br"),o(5,"strong"),s(6,"\u0130ptal Tarihi:"),n(),s(7),N(8,"date"),n()),i&2){let e=u(3);l(3),v(" ",e.selectedRequest.cancelReason),l(4),v(" ",D(8,2,e.selectedRequest.cancelledAt,"short")," ")}}function dt(i,t){if(i&1&&(o(0,"li",75)(1,"a",76),c(2,"i",77),s(3),n()()),i&2){let e=t.$implicit;l(),m("href",e.url,Z),l(2),v(" ",e.fileName," ")}}function ut(i,t){if(i&1&&(o(0,"ul",73),p(1,dt,4,2,"li",74),n()),i&2){let e=u(3);l(),m("ngForOf",e.selectedRequest.documents)}}function pt(i,t){i&1&&(o(0,"p",78),s(1,"Bu talebe ait belge bulunmuyor."),n())}function gt(i,t){if(i&1&&(o(0,"li",75)(1,"a",76),c(2,"i",79),s(3),n()()),i&2){let e=t.$implicit;l(),m("href",e.url,Z),l(2),v(" ",e.fileName," ")}}function ft(i,t){if(i&1&&(o(0,"ul",73),p(1,gt,4,2,"li",74),n()),i&2){let e=u(3);l(),m("ngForOf",e.selectedRequest.images)}}function ht(i,t){i&1&&(o(0,"p",78),s(1,"Bu talebe ait g\xF6rsel bulunmuyor."),n())}function Ct(i,t){if(i&1&&(o(0,"div",80),s(1),n()),i&2){let e=u(3);l(),v(" ",e.selectedFiles.length," dosya se\xE7ildi. ")}}function vt(i,t){i&1&&c(0,"i",86)}function _t(i,t){i&1&&c(0,"i",87)}function bt(i,t){if(i&1&&(o(0,"div",50)(1,"small",81),s(2),n(),o(3,"div",22)(4,"small",82),s(5),N(6,"date"),p(7,vt,1,0,"i",83)(8,_t,1,0,"i",84),n(),c(9,"br"),o(10,"span",85),s(11),n()()()),i&2){let e=t.$implicit,r=u(3);l(),m("ngClass",Ie(11,Je,e.fromUserId===r.customerId)),l(),v(" ",e.fromUserId===r.customerId?"Ben":(r.selectedRequest==null||r.selectedRequest.assignedAgent==null?null:r.selectedRequest.assignedAgent.fullName)||"Temsilci"," "),l(),m("ngClass",Ie(13,Je,e.fromUserId===r.customerId)),l(2),v(" ",D(6,8,e.sentAt,"shortTime")," "),l(2),m("ngIf",e.isRead),l(),m("ngIf",!e.isRead),l(2),m("ngClass",e.fromUserId===r.customerId?"bg-primary text-white":"bg-light text-dark"),l(),v(" ",e.message," ")}}function xt(i,t){if(i&1){let e=b();o(0,"button",88),f("click",function(){h(e);let a=u(3);return C(a.endCall())}),c(1,"i",21),s(2," Bitir "),n()}}function yt(i,t){if(i&1){let e=b();o(0,"div",39)(1,"div",40)(2,"div",41)(3,"strong"),s(4,"Grup:"),n(),s(5),n(),o(6,"div",41)(7,"strong"),s(8,"Tedavi:"),n(),s(9),n()(),o(10,"div",40)(11,"div",41)(12,"strong"),s(13,"Durum:"),n(),s(14),n(),o(15,"div",41)(16,"strong"),s(17,"Dil:"),n(),s(18),n()(),o(19,"div",42)(20,"strong"),s(21,"Not:"),n(),s(22),n(),p(23,ct,9,5,"div",43),o(24,"div",44)(25,"h6"),c(26,"i",45),s(27," Belgeler"),n(),p(28,ut,2,1,"ul",46)(29,pt,2,0,"ng-template",null,2,O),n(),o(31,"div",44)(32,"h6"),c(33,"i",47),s(34," G\xF6rseller"),n(),p(35,ft,2,1,"ul",46)(36,ht,2,0,"ng-template",null,3,O),n(),o(38,"div",48)(39,"h6"),c(40,"i",49),s(41," Yeni Belge / G\xF6rsel Y\xFCkle"),n(),o(42,"div",50)(43,"label",51),s(44,"Dosya T\xFCr\xFC"),n(),o(45,"select",52),Se("ngModelChange",function(a){h(e);let d=u(2);return ye(d.selectedUploadType,a)||(d.selectedUploadType=a),C(a)}),o(46,"option",53),s(47,"Se\xE7iniz"),n(),o(48,"option",54),s(49,"\u{1F4C4} Belge"),n(),o(50,"option",55),s(51,"\u{1F4F8} G\xF6rsel"),n()()(),o(52,"input",56),f("change",function(a){h(e);let d=u(2);return C(d.onFileSelected(a))}),n(),p(53,Ct,2,1,"div",57),o(54,"button",58),f("click",function(){h(e);let a=u(2);return C(a.uploadSelectedFiles())}),c(55,"i",59),s(56," Dosyalar\u0131 Y\xFCkle "),n()(),c(57,"hr"),o(58,"div",60)(59,"h6"),c(60,"i",61),s(61," Mesajla\u015Fma"),n(),o(62,"div",62,4),p(64,bt,12,15,"div",63),n(),o(65,"div",64)(66,"input",65),Se("ngModelChange",function(a){h(e);let d=u(2);return ye(d.newMessage,a)||(d.newMessage=a),C(a)}),f("keyup.enter",function(){h(e);let a=u(2);return C(a.sendChatMessage())}),n(),o(67,"button",66),f("click",function(){h(e);let a=u(2);return C(a.sendChatMessage())}),c(68,"i",67),n()()(),c(69,"hr"),o(70,"div",68)(71,"button",69),f("click",function(){h(e);let a=u(2);return C(a.startVoiceCall())}),c(72,"i",70),s(73," Arama Ba\u015Flat "),n(),p(74,xt,3,0,"button",71),n()()}if(i&2){let e=M(30),r=M(37),a=u(2);l(5),v(" ",a.selectedRequest.groupName),l(4),v(" ",a.selectedRequest.treatmentName),l(5),v(" ",a.selectedRequest.status),l(4),v(" ",a.selectedRequest.language||"-"),l(4),v(" ",a.selectedRequest.notes||"Yok"),l(),m("ngIf",a.selectedRequest.isCancelled),l(5),m("ngIf",a.selectedRequest.documents==null?null:a.selectedRequest.documents.length)("ngIfElse",e),l(7),m("ngIf",a.selectedRequest.images==null?null:a.selectedRequest.images.length)("ngIfElse",r),l(10),xe("ngModel",a.selectedUploadType),l(8),m("ngIf",a.selectedFiles.length>0),l(11),m("ngForOf",a.chatMessages),l(2),xe("ngModel",a.newMessage),l(5),m("disabled",a.callActive),l(3),m("ngIf",a.callActive)}}function St(i,t){if(i&1){let e=b();o(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"h5",33),c(5,"i",34),s(6," Talep Detaylar\u0131 "),n(),o(7,"button",35),f("click",function(){h(e);let a=u();return C(a.closeModal())}),n()(),p(8,yt,75,16,"div",36),o(9,"div",37)(10,"button",38),f("click",function(){h(e);let a=u();return C(a.closeModal())}),s(11,"Kapat"),n()()()()()}if(i&2){let e=u();l(8),m("ngIf",e.selectedRequest)}}var pe=class i{constructor(t,e,r,a,d,T,ti){this.http=t;this.toastr=e;this.chatService=r;this.voiceService=a;this.auth=d;this.cdr=T;this.zone=ti}requests=[];selectedRequest=null;showModal=!1;loadingDetail=!1;selectedFiles=[];selectedUploadType="";newMessage="";chatMessages=[];customerId;agentId;incomingVisible=!1;callerName="";currentIncomingCall=null;callActive=!1;localAudio;remoteAudio;baseUrl=`${S.apiUrl}/api/customer/requests`;ngOnInit(){return ee(this,null,function*(){let t=this.auth.token;if(!t){this.toastr.error("Oturum ge\xE7ersiz.");return}this.customerId=this.decodeCustomerId(),this.chatService.startConnection(t,"customer",this.customerId),yield this.voiceService.startConnection(t,"customer",this.customerId),this.chatService.messages$.subscribe(e=>{this.selectedRequest&&(this.chatMessages=e.filter(r=>r.requestId===this.selectedRequest.id))}),this.loadRequests(),this.voiceService.incomingCall.subscribe(e=>{let r=e.fromUserId??e.FromUserId;r!==this.customerId&&this.zone.run(()=>{this.callerName=e.FromUserName||`Temsilci #${r}`,this.currentIncomingCall=e,this.incomingVisible=!0,this.toastr.info(`${this.callerName} sizi ar\u0131yor...`,"\u{1F4DE} Gelen \xC7a\u011Fr\u0131"),this.cdr.detectChanges()})}),this.voiceService.callEnded.subscribe(e=>{this.zone.run(()=>{if(this.incomingVisible=!1,this.callActive=!1,this.currentIncomingCall=null,this.callerName="",this.selectedRequest&&(this.selectedRequest.isCalling=!1,this.selectedRequest.voiceCalls?.length>0)){let r=this.selectedRequest.voiceCalls[0];r.status="Completed",r.endedAt=new Date}if(this.requests?.length&&this.selectedRequest){let r=this.requests.find(a=>a.id===this.selectedRequest.id);r&&(r.isCalling=!1)}this.toastr.warning(`Kullan\u0131c\u0131 #${e} \xE7a\u011Fr\u0131y\u0131 sonland\u0131rd\u0131.`,"\xC7a\u011Fr\u0131 Bitti"),this.cdr.detectChanges()})}),this.voiceService.onCallActive.subscribe(e=>{this.zone.run(()=>{this.callActive=e,this.cdr.detectChanges()})})})}ngAfterViewInit(){this.localAudio&&this.remoteAudio&&(this.voiceService.setLocalAudioElement(this.localAudio.nativeElement),this.voiceService.setRemoteAudioElement(this.remoteAudio.nativeElement))}ngOnDestroy(){this.chatService.stopConnection(),this.voiceService.cleanup()}decodeCustomerId(){try{let t=localStorage.getItem("customerToken");if(!t)return 0;let e=JSON.parse(atob(t.split(".")[1]));return parseInt(e.sub||e.nameid||e.id||e["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]||"0",10)}catch(t){return 0}}loadRequests(){this.http.get(this.baseUrl).subscribe({next:t=>this.requests=t,error:()=>this.toastr.error("Talepler y\xFCklenemedi.")})}onFileSelected(t){this.selectedFiles=Array.from(t.target.files)}uploadSelectedFiles(){if(!this.selectedFiles.length||!this.selectedRequest){this.toastr.warning("Dosya se\xE7iniz.");return}if(!this.selectedUploadType){this.toastr.warning("Dosya t\xFCr\xFC se\xE7iniz.");return}let t=new FormData;this.selectedFiles.forEach(e=>t.append("files",e)),t.append("type",this.selectedUploadType),this.http.post(`${this.baseUrl}/${this.selectedRequest.id}/attachments`,t).subscribe({next:()=>{this.toastr.success("Dosyalar y\xFCklendi."),this.selectedFiles=[],this.selectedUploadType=""},error:()=>this.toastr.error("Dosya y\xFCklenemedi.")})}sendChatMessage(){return ee(this,null,function*(){if(!(!this.newMessage.trim()||!this.selectedRequest)){if(this.agentId=this.selectedRequest?.assignedAgent?.id||this.selectedRequest?.assignedAgentId||this.chatService.getAssignedAgentId(this.customerId)||0,console.log("Volkan",this.selectedRequest),!this.agentId){this.toastr.warning("Temsilci atanmad\u0131.");return}try{yield this.chatService.sendMessage(this.selectedRequest.id,this.customerId,this.agentId,this.newMessage),this.newMessage=""}catch(t){this.toastr.error("Mesaj g\xF6nderilemedi.")}}})}startVoiceCall(){return ee(this,null,function*(){if(!this.selectedRequest?.assignedAgent){this.toastr.warning("Temsilci atanmad\u0131.");return}try{this.callActive=!0,this.selectedRequest.isCalling=!0,yield this.voiceService.startCall(this.selectedRequest.id,this.selectedRequest.assignedAgent.id),this.toastr.success("Arama ba\u015Flat\u0131ld\u0131.")}catch(t){this.callActive=!1,this.selectedRequest.isCalling=!1,this.toastr.error("Arama ba\u015Flat\u0131lamad\u0131.")}})}endCall(){console.warn("[CustomerRequests] endCall() triggered"),this.voiceService.endCall(),this.callActive=!1,this.toastr.info("\xC7a\u011Fr\u0131 sonland\u0131r\u0131ld\u0131.")}onAcceptCall(){this.incomingVisible=!1,this.currentIncomingCall&&(this.voiceService.acceptCall(this.currentIncomingCall.requestId,this.currentIncomingCall.fromUserId),this.callActive=!0,this.toastr.success("\xC7a\u011Fr\u0131 kabul edildi."))}onRejectCall(){this.incomingVisible=!1,this.currentIncomingCall&&this.voiceService.endCall(this.currentIncomingCall.requestId),this.currentIncomingCall=null}openDetails(t){this.loadingDetail=!0,this.http.get(`${this.baseUrl}/${t.id}`).subscribe({next:e=>{this.selectedRequest=e,this.chatService.loadMessageHistory(e.id),this.chatService.onConnected.pipe(Me(r=>r===!0),Oe(1)).subscribe(()=>{this.chatService.markAllAsRead(e.id,this.customerId)}),this.showModal=!0,this.loadingDetail=!1,setTimeout(()=>this.scrollToBottom(),200)},error:()=>{this.toastr.error("Detay y\xFCklenemedi."),this.loadingDetail=!1}})}closeModal(){this.showModal=!1,this.selectedRequest=null,this.newMessage="",this.chatMessages=[]}chatBox;scrollToBottom(){try{this.chatBox?.nativeElement&&setTimeout(()=>{this.chatBox.nativeElement.scrollTop=this.chatBox.nativeElement.scrollHeight},50)}catch(t){console.warn("[CustomerRequests] scrollToBottom error:",t)}}cancelRequest(t){let e=prompt("\u0130ptal sebebi:");e!==null&&this.http.patch(`${this.baseUrl}/${t.id}/cancel`,{reason:e}).subscribe({next:()=>{this.toastr.success("Talep iptal edildi."),this.loadRequests()},error:()=>this.toastr.error("Talep iptal edilemedi.")})}static \u0275fac=function(e){return new(e||i)(g(w),g(le),g($e),g(Ke),g(I),g(ke),g(Fe))};static \u0275cmp=y({type:i,selectors:[["app-customer-requests"]],viewQuery:function(e,r){if(e&1&&qe(tt,5)(it,5)(nt,5),e&2){let a;ne(a=oe())&&(r.localAudio=a.first),ne(a=oe())&&(r.remoteAudio=a.first),ne(a=oe())&&(r.chatBox=a.first)}},standalone:!1,decls:30,vars:6,consts:[["localAudio",""],["remoteAudio",""],["noDocs",""],["noImgs",""],["chatBox",""],["autoplay","","muted","","playsinline",""],["autoplay","","playsinline",""],[1,"card","shadow-sm","border-0","p-4","mt-3"],[1,"fw-bold","mb-3"],[1,"bi","bi-clipboard-check","me-2"],[3,"visible","callerName","accept","reject",4,"ngIf"],["class","alert alert-success text-center p-2 mb-2 shadow-sm",4,"ngIf"],[1,"table","table-hover","align-middle","text-center"],[1,"table-light"],[4,"ngFor","ngForOf"],["class","text-muted py-4 text-center",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],["class","modal fade show d-block","tabindex","-1","role","dialog",4,"ngIf"],[3,"accept","reject","visible","callerName"],[1,"alert","alert-success","text-center","p-2","mb-2","shadow-sm"],[1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"bi","bi-telephone-x"],[3,"ngClass"],[1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"bi","bi-eye"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"bi","bi-x-circle"],[1,"text-muted","py-4","text-center"],[1,"modal-backdrop","fade","show"],["tabindex","-1","role","dialog",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","shadow-lg"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"bi","bi-file-earmark-text","me-2"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-md-6"],[1,"mb-3"],["class","alert alert-warning",4,"ngIf"],[1,"mt-3"],[1,"bi","bi-paperclip","me-2"],["class","list-group",4,"ngIf","ngIfElse"],[1,"bi","bi-images","me-2"],[1,"border","rounded","p-3","mt-4","bg-light"],[1,"bi","bi-upload","me-2"],[1,"mb-2"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],["type","file","multiple","",1,"form-control","mb-2",3,"change"],["class","small text-muted mb-2",4,"ngIf"],[1,"btn","btn-success","w-100",3,"click"],[1,"bi","bi-cloud-arrow-up"],[1,"mt-4","border-top","pt-3"],[1,"bi","bi-chat-dots","me-2"],[1,"chat-box","border","rounded","p-3","mb-2",2,"height","250px","overflow-y","auto","background","#fafafa"],["class","mb-2",4,"ngFor","ngForOf"],[1,"input-group"],["type","text","placeholder","Mesaj yaz\u0131n...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-send"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-success",3,"click","disabled"],[1,"bi","bi-telephone"],["class","btn btn-danger ms-2 btn-sm",3,"click",4,"ngIf"],[1,"alert","alert-warning"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["target","_blank",3,"href"],[1,"bi","bi-file-earmark"],[1,"text-muted","mt-2"],[1,"bi","bi-file-earmark-image"],[1,"small","text-muted","mb-2"],[1,"fw-semibold","d-block",3,"ngClass"],[1,"text-muted"],["class","bi bi-check2-all text-primary ms-1",4,"ngIf"],["class","bi bi-check2 text-secondary ms-1",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"bi","bi-check2-all","text-primary","ms-1"],[1,"bi","bi-check2","text-secondary","ms-1"],[1,"btn","btn-danger","ms-2","btn-sm",3,"click"]],template:function(e,r){e&1&&(c(0,"audio",5,0)(2,"audio",6,1),o(4,"div",7)(5,"h5",8),c(6,"i",9),s(7," Taleplerim "),n(),p(8,rt,1,2,"app-call-incoming-modal",10)(9,st,5,0,"div",11),o(10,"table",12)(11,"thead",13)(12,"tr")(13,"th"),s(14,"Grup"),n(),o(15,"th"),s(16,"Tedavi"),n(),o(17,"th"),s(18,"Durum"),n(),o(19,"th"),s(20,"Olu\u015Fturulma"),n(),o(21,"th"),s(22,"Notlar"),n(),o(23,"th"),s(24,"\u0130\u015Flemler"),n()()(),o(25,"tbody"),p(26,at,20,15,"tr",14),n()(),p(27,lt,2,0,"div",15),n(),p(28,mt,1,0,"div",16)(29,St,12,1,"div",17)),e&2&&(l(8),m("ngIf",r.incomingVisible),l(),m("ngIf",r.callActive),l(17),m("ngForOf",r.requests),l(),m("ngIf",r.requests.length===0),l(),m("ngIf",r.showModal),l(),m("ngIf",r.showModal))},dependencies:[se,V,A,H,z,F,j,q,Le,Ze,Ne],styles:[".customer-requests[_ngcontent-%COMP%]{padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d}.title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;margin-bottom:1rem;color:#333}.loading[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:#777;margin-top:1rem}.requests-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.requests-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .requests-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;border-bottom:1px solid #eee;text-align:left;font-size:.95rem}.requests-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600}.status[_ngcontent-%COMP%]{padding:4px 10px;border-radius:8px;color:#fff;font-weight:500}.status.pending[_ngcontent-%COMP%]{background-color:#f59e0b}.status.approved[_ngcontent-%COMP%]{background-color:#10b981}.status.rejected[_ngcontent-%COMP%]{background-color:#ef4444}"]})};var ge=class i{constructor(t){this.http=t}groupUrl=`${S.apiUrl}/api/treatments/groups`;treatmentsUrl=`${S.apiUrl}/api/treatments`;getGroups(){return this.http.get(this.groupUrl,{withCredentials:!0})}getByGroup(t){return this.http.get(`${this.treatmentsUrl}/by-group/${t}`,{withCredentials:!0})}static \u0275fac=function(e){return new(e||i)(P(w))};static \u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})};var fe=class i{constructor(t){this.http=t}baseUrl=`${S.apiUrl}/api/customer/requests`;getAuthHeaders(){let t=localStorage.getItem("customerToken");return{headers:new Be({Authorization:`Bearer ${t}`})}}createRequest(t){return this.http.post(this.baseUrl,t,this.getAuthHeaders())}getMyRequests(){return this.http.get(this.baseUrl,this.getAuthHeaders())}getAll(){return this.http.get(this.baseUrl,this.getAuthHeaders())}getDetail(t){return this.http.get(`${this.baseUrl}/${t}`,this.getAuthHeaders())}cancel(t,e){return this.http.patch(`${this.baseUrl}/${t}/cancel`,{reason:e},this.getAuthHeaders())}getRequestById(t){return this.http.get(`${this.baseUrl}/${t}`,this.getAuthHeaders())}uploadFiles(t,e,r){let a=new FormData;for(let d of e)a.append("files",d);return a.append("type",r.toString()),this.http.post(`${this.baseUrl}/${t}/attachments`,a,this.getAuthHeaders())}static \u0275fac=function(e){return new(e||i)(P(w))};static \u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})};function Rt(i,t){if(i&1&&(o(0,"option",20),s(1),n()),i&2){let e=t.$implicit;m("value",e.id),l(),x(e.groupName)}}function Et(i,t){if(i&1&&(o(0,"option",20),s(1),n()),i&2){let e=t.$implicit;m("value",e.id),l(),x(e.treatmentName)}}function Tt(i,t){if(i&1&&(o(0,"li"),s(1),N(2,"number"),n()),i&2){let e=t.$implicit;l(),re(" \u{1F4CE} ",e.name," (",D(2,2,e.size/1024,"1.0-0")," KB) ")}}function Mt(i,t){if(i&1&&(o(0,"div",24),s(1),o(2,"ul",25),p(3,Tt,3,5,"li",26),n()()),i&2){let e=u(2);l(),v(" Se\xE7ilen ",e.documentFiles.length," belge. "),l(2),m("ngForOf",e.documentFiles)}}function Ot(i,t){if(i&1){let e=b();o(0,"div",21)(1,"input",22),f("change",function(a){h(e);let d=u();return C(d.onDocumentsSelected(a))}),n(),p(2,Mt,4,2,"div",23),n()}if(i&2){let e=u();l(2),m("ngIf",e.documentFiles.length>0)}}function At(i,t){if(i&1&&(o(0,"div"),c(1,"img",30),n()),i&2){let e=t.$implicit,r=u(3);l(),m("src",r.getPreviewUrl(e),Z)}}function Ft(i,t){if(i&1&&(o(0,"div",29),p(1,At,2,1,"div",26),n()),i&2){let e=u(2);l(),m("ngForOf",e.imageFiles)}}function qt(i,t){if(i&1){let e=b();o(0,"div",21)(1,"input",27),f("change",function(a){h(e);let d=u();return C(d.onImagesSelected(a))}),n(),p(2,Ft,2,1,"div",28),n()}if(i&2){let e=u();l(2),m("ngIf",e.imageFiles.length>0)}}function Pt(i,t){i&1&&c(0,"i",31)}function kt(i,t){i&1&&(o(0,"span"),Ae(),o(1,"svg",32),c(2,"circle",33)(3,"path",34),n(),s(4," G\xF6nderiliyor... "),n())}var he=class i{constructor(t,e,r,a){this.fb=t;this.treatmentService=e;this.requestService=r;this.toastr=a}form;treatmentGroups=[];treatments=[];documentFiles=[];imageFiles=[];previewUrls=[];loading=!1;ngOnInit(){this.form=this.fb.group({treatmentGroupId:["",_.required],treatmentId:["",_.required],notes:[""],hasDocuments:[!1],hasImages:[!1]}),this.loadTreatmentGroups()}ngOnDestroy(){this.cleanupPreviews()}loadTreatmentGroups(){this.treatmentService.getGroups().subscribe({next:t=>this.treatmentGroups=t,error:t=>console.error("Tedavi gruplar\u0131 al\u0131namad\u0131:",t)})}onGroupChange(t){let e=t.target.value;if(!e){this.treatments=[];return}this.treatmentService.getByGroup(e).subscribe({next:r=>this.treatments=r,error:r=>console.error("Tedaviler al\u0131namad\u0131:",r)})}onDocumentsSelected(t){this.documentFiles=Array.from(t.target.files)}onImagesSelected(t){this.cleanupPreviews(),this.imageFiles=Array.from(t.target.files),this.previewUrls=this.imageFiles.map(e=>URL.createObjectURL(e))}getPreviewUrl(t){return URL.createObjectURL(t)}cleanupPreviews(){this.previewUrls.forEach(t=>URL.revokeObjectURL(t)),this.previewUrls=[]}submit(){if(this.form.invalid||this.loading)return;this.loading=!0;let t=new FormData;t.append("treatmentId",this.form.value.treatmentId),t.append("notes",this.form.value.notes||""),this.requestService.createRequest(t).subscribe({next:e=>{let r=e.id;if(!r){this.toastr.error("Talep ID al\u0131namad\u0131."),this.loading=!1;return}let a=[];this.form.value.hasDocuments&&this.documentFiles.length>0&&a.push(this.requestService.uploadFiles(r,this.documentFiles,1).toPromise()),this.form.value.hasImages&&this.imageFiles.length>0&&a.push(this.requestService.uploadFiles(r,this.imageFiles,2).toPromise()),Promise.all(a).then(()=>{this.toastr.success("Talebiniz ve dosyalar ba\u015Far\u0131yla g\xF6nderildi."),this.form.reset(),this.documentFiles=[],this.imageFiles=[],this.cleanupPreviews()}).catch(d=>{console.error("Dosya y\xFCkleme hatas\u0131:",d),this.toastr.error("Dosya y\xFCkleme ba\u015Far\u0131s\u0131z.")}).finally(()=>this.loading=!1)},error:e=>{console.error("Talep olu\u015Fturulamad\u0131:",e),this.toastr.error("Talep olu\u015Fturulamad\u0131."),this.loading=!1}})}static \u0275fac=function(e){return new(e||i)(g($),g(ge),g(fe),g(le))};static \u0275cmp=y({type:i,selectors:[["app-customer-request-form"]],standalone:!1,decls:36,vars:8,consts:[["id","remoteAudio","autoplay",""],["enctype","multipart/form-data",1,"bg-white","p-6","rounded-lg","shadow-md",3,"ngSubmit","formGroup"],[1,"mb-4","text-xl","font-bold"],[1,"bi","bi-plus-circle"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["formControlName","treatmentGroupId",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","treatmentId",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","notes","rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"flex","items-center","mb-3"],["type","checkbox","id","hasDocuments","formControlName","hasDocuments",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","hasDocuments",1,"ml-2","text-sm","text-gray-700"],["class","mb-4 pl-6",4,"ngIf"],["type","checkbox","id","hasImages","formControlName","hasImages",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500"],["for","hasImages",1,"ml-2","text-sm","text-gray-700"],["type","submit",1,"w-full","bg-[#16edb1]","hover:bg-[#13c99a]","text-white","font-semibold","py-2","px-4","rounded-md","transition-colors","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","bi bi-send",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"mb-4","pl-6"],["type","file","multiple","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["class","text-sm text-gray-600 mt-2",4,"ngIf"],[1,"text-sm","text-gray-600","mt-2"],[1,"list-none","mt-2"],[4,"ngFor","ngForOf"],["type","file","multiple","","accept","image/*",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["class","flex gap-2 flex-wrap mt-2",4,"ngIf"],[1,"flex","gap-2","flex-wrap","mt-2"],[1,"border","rounded","shadow-sm",2,"width","70px","height","70px","object-fit","cover",3,"src"],[1,"bi","bi-send"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","inline-block","w-4","h-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){if(e&1&&(c(0,"audio",0),o(1,"form",1),f("ngSubmit",function(){return r.submit()}),o(2,"h5",2),c(3,"i",3),n(),o(4,"div",4)(5,"label",5),s(6,"Tedavi Grubu"),n(),o(7,"select",6),f("change",function(d){return r.onGroupChange(d)}),o(8,"option",7),s(9,"Se\xE7iniz"),n(),p(10,Rt,2,2,"option",8),n()(),o(11,"div",4)(12,"label",5),s(13,"Tedavi"),n(),o(14,"select",9)(15,"option",7),s(16,"Se\xE7iniz"),n(),p(17,Et,2,2,"option",8),n()(),o(18,"div",4)(19,"label",5),s(20,"Notlar"),n(),c(21,"textarea",10),n(),o(22,"div",11),c(23,"input",12),o(24,"label",13),s(25,"\u{1F4C4} Belge y\xFCklemek istiyorum (kimlik, pasaport vb.)"),n()(),p(26,Ot,3,1,"div",14),o(27,"div",11),c(28,"input",15),o(29,"label",16),s(30,"\u{1F4F8} Resim y\xFCklemek istiyorum (tedavi foto\u011Fraflar\u0131)"),n()(),p(31,qt,3,1,"div",14),o(32,"button",17),s(33,"Talep Olu\u015Ftur "),p(34,Pt,1,0,"i",18)(35,kt,5,0,"span",19),n()()),e&2){let a,d;l(),m("formGroup",r.form),l(9),m("ngForOf",r.treatmentGroups),l(7),m("ngForOf",r.treatments),l(9),m("ngIf",(a=r.form.get("hasDocuments"))==null?null:a.value),l(5),m("ngIf",(d=r.form.get("hasImages"))==null?null:d.value),l(),m("disabled",r.loading),l(2),m("ngIf",!r.loading),l(),m("ngIf",r.loading)}},dependencies:[V,A,G,H,z,F,ae,j,q,B,U,L,De],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}h3[_ngcontent-%COMP%]{font-weight:600;color:#333;text-align:center}form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 12px #00000014;transition:all .3s ease}form[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f}.form-label[_ngcontent-%COMP%]{color:#444;font-weight:500;margin-bottom:6px;display:block}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ccc;padding:10px 12px;font-size:.95rem;transition:border-color .3s,box-shadow .3s}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 2px #007bff40;outline:none}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}button.btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:600;font-size:1rem;letter-spacing:.3px;padding:10px 0;background:linear-gradient(135deg,#007bff,#0056b3);border:none;color:#fff;transition:all .3s ease}button.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0056b3,#004094)}button.btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed}@media(max-width:768px){form[_ngcontent-%COMP%]{padding:16px}h3[_ngcontent-%COMP%]{font-size:1.2rem}}.alert-success[_ngcontent-%COMP%]{background:#e6ffed;color:#155724;border:1px solid #b2f5ca;padding:10px 12px;border-radius:6px}.alert-error[_ngcontent-%COMP%]{background:#ffeaea;color:#721c24;border:1px solid #f5b5b5;padding:10px 12px;border-radius:6px}.card[_ngcontent-%COMP%]{border-radius:10px}label[_ngcontent-%COMP%]{font-weight:500}input[type=file][_ngcontent-%COMP%]{cursor:pointer}.card[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}img[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}img[_ngcontent-%COMP%]:hover{transform:scale(1.1);z-index:2}"]})};function Nt(i,t){if(i&1&&(o(0,"div",23),s(1),n()),i&2){let e=u();l(),v(" ",e.error," ")}}function Dt(i,t){if(i&1&&(o(0,"div",24),s(1),n()),i&2){let e=u();l(),v(" ",e.logoutMessage," ")}}function Vt(i,t){i&1&&(o(0,"div",25),s(1," Ge\xE7erli bir e-posta adresi giriniz. "),n())}function Bt(i,t){i&1&&(o(0,"div",25),s(1," Parola en az 6 karakter olmal\u0131d\u0131r. "),n())}function Gt(i,t){i&1&&(Y(0),s(1," Giri\u015F "),W())}function Lt(i,t){i&1&&(c(0,"span",26),s(1," Giri\u015F yap\u0131l\u0131yor... "))}var Ce=class i{constructor(t,e,r,a){this.fb=t;this.auth=e;this.router=r;this.route=a;this.form=this.fb.group({email:["",[_.required,_.email]],password:["",[_.required,_.minLength(6)]],rememberMe:[!1]})}form;loading=!1;error;logoutMessage;ngOnInit(){this.route.queryParams.subscribe(e=>{e.loggedOut==="true"&&(this.logoutMessage="Ba\u015Far\u0131yla \xE7\u0131k\u0131\u015F yapt\u0131n\u0131z \u{1F44B}")});let t=localStorage.getItem("rememberCustomerEmail");t&&this.form.patchValue({email:t,rememberMe:!0})}submit(){if(this.form.invalid)return;this.loading=!0;let{email:t,password:e,rememberMe:r}=this.form.value;r?localStorage.setItem("rememberCustomerEmail",t):localStorage.removeItem("rememberCustomerEmail"),this.auth.login(t,e).subscribe({next:a=>{localStorage.setItem("customerProfile",JSON.stringify(a.profile)),this.router.navigate(["/customer/dashboard"])},error:a=>{console.error(a),this.error=a?.error?.message??"Giri\u015F ba\u015Far\u0131s\u0131z.",this.loading=!1},complete:()=>{this.loading=!1}})}static \u0275fac=function(e){return new(e||i)(g($),g(I),g(R),g(He))};static \u0275cmp=y({type:i,selectors:[["app-customer-login"]],standalone:!1,decls:32,vars:8,consts:[["loadingTpl",""],[1,"d-flex","justify-content-center","align-items-center","vh-100","bg-light"],[1,"card","shadow","p-4","login-card"],[1,"text-center","mb-3"],["src","logo.png","alt","Logo",1,"login-logo","mb-2"],["class","alert alert-danger mt-2",4,"ngIf"],["class","alert alert-success text-center mb-3",4,"ngIf"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","email","placeholder","you@company.com",1,"form-control"],["class","text-danger small",4,"ngIf"],[1,"mb-2"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"form-check"],["type","checkbox","id","rememberMe","formControlName","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],["routerLink","/customer/forgot-password",1,"small","text-decoration-none","text-primary"],["type","submit",1,"btn","login-btn","w-100",3,"disabled"],[4,"ngIf","ngIfElse"],[1,"text-center","mt-3","small"],["routerLink","/customer/register",1,"text-primary","text-decoration-none"],[1,"alert","alert-danger","mt-2"],[1,"alert","alert-success","text-center","mb-3"],[1,"text-danger","small"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(e,r){if(e&1){let a=b();o(0,"div",1)(1,"div",2)(2,"div",3),c(3,"img",4),n(),p(4,Nt,2,1,"div",5)(5,Dt,2,1,"div",6),o(6,"form",7),f("ngSubmit",function(){return h(a),C(r.submit())}),o(7,"div",8)(8,"label",9),s(9,"E-posta"),n(),c(10,"input",10),p(11,Vt,2,0,"div",11),n(),o(12,"div",12)(13,"label",9),s(14,"Parola"),n(),c(15,"input",13),p(16,Bt,2,0,"div",11),n(),o(17,"div",14)(18,"div",15),c(19,"input",16),o(20,"label",17),s(21,"Beni hat\u0131rla"),n()(),o(22,"a",18),s(23," \u015Eifremi unuttum? "),n()(),o(24,"button",19),p(25,Gt,2,0,"ng-container",20)(26,Lt,2,0,"ng-template",null,0,O),n()(),o(28,"div",21),s(29," Hesab\u0131n\u0131z yok mu? "),o(30,"a",22),s(31," Kay\u0131t olun "),n()()()()}if(e&2){let a,d,T=M(27);l(4),m("ngIf",r.error),l(),m("ngIf",r.logoutMessage),l(),m("formGroup",r.form),l(5),m("ngIf",((a=r.form.get("email"))==null?null:a.invalid)&&((a=r.form.get("email"))==null?null:a.touched)),l(5),m("ngIf",((d=r.form.get("password"))==null?null:d.invalid)&&((d=r.form.get("password"))==null?null:d.touched)),l(8),m("disabled",r.form.invalid||r.loading),l(),m("ngIf",!r.loading)("ngIfElse",T)}},dependencies:[A,G,F,ae,q,B,U,L,K],styles:["h2[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}button[_ngcontent-%COMP%]{margin-top:10px}button[disabled][_ngcontent-%COMP%]{opacity:.7;cursor:not-allowed}.login-logo[_ngcontent-%COMP%]{max-width:330px;height:auto}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;border-radius:15px;background:#fff}.vh-100[_ngcontent-%COMP%]{min-height:100vh}body[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00ffb2,#09f)!important}.login-btn[_ngcontent-%COMP%]{background-color:var(--primary-color)!important;border-color:var(--primary-color)!important;color:var(--text-light);font-weight:600;transition:background .3s ease}.login-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-color-hover)!important;border-color:var(--primary-color-hover)!important}"]})};var Qe=[{name:"Afghanistan",iso2:"AF",iso3:"AFG",phoneCode:"+93",regions:[]},{name:"Albania",iso2:"AL",iso3:"ALB",phoneCode:"+355",regions:[]},{name:"Algeria",iso2:"DZ",iso3:"DZA",phoneCode:"+213",regions:[]},{name:"Andorra",iso2:"AD",iso3:"AND",phoneCode:"+376",regions:[]},{name:"Angola",iso2:"AO",iso3:"AGO",phoneCode:"+244",regions:[]},{name:"Argentina",iso2:"AR",iso3:"ARG",phoneCode:"+54",regions:[]},{name:"Armenia",iso2:"AM",iso3:"ARM",phoneCode:"+374",regions:[]},{name:"Australia",iso2:"AU",iso3:"AUS",phoneCode:"+61",regions:[{name:"New South Wales",areaCode:"2"},{name:"Victoria",areaCode:"3"},{name:"Queensland",areaCode:"7"},{name:"Western Australia",areaCode:"8"}]},{name:"Austria",iso2:"AT",iso3:"AUT",phoneCode:"+43",regions:[]},{name:"Azerbaijan",iso2:"AZ",iso3:"AZE",phoneCode:"+994",regions:[]},{name:"Bahamas",iso2:"BS",iso3:"BHS",phoneCode:"+1-242",regions:[]},{name:"Bahrain",iso2:"BH",iso3:"BHR",phoneCode:"+973",regions:[]},{name:"Bangladesh",iso2:"BD",iso3:"BGD",phoneCode:"+880",regions:[]},{name:"Belarus",iso2:"BY",iso3:"BLR",phoneCode:"+375",regions:[]},{name:"Belgium",iso2:"BE",iso3:"BEL",phoneCode:"+32",regions:[]},{name:"Belize",iso2:"BZ",iso3:"BLZ",phoneCode:"+501",regions:[]},{name:"Benin",iso2:"BJ",iso3:"BEN",phoneCode:"+229",regions:[]},{name:"Bhutan",iso2:"BT",iso3:"BTN",phoneCode:"+975",regions:[]},{name:"Bolivia",iso2:"BO",iso3:"BOL",phoneCode:"+591",regions:[]},{name:"Bosnia and Herzegovina",iso2:"BA",iso3:"BIH",phoneCode:"+387",regions:[]},{name:"Brazil",iso2:"BR",iso3:"BRA",phoneCode:"+55",regions:[{name:"S\xE3o Paulo",areaCode:"11"},{name:"Rio de Janeiro",areaCode:"21"},{name:"Bras\xEDlia",areaCode:"61"}]},{name:"Bulgaria",iso2:"BG",iso3:"BGR",phoneCode:"+359",regions:[]},{name:"Cambodia",iso2:"KH",iso3:"KHM",phoneCode:"+855",regions:[]},{name:"Cameroon",iso2:"CM",iso3:"CMR",phoneCode:"+237",regions:[]},{name:"Canada",iso2:"CA",iso3:"CAN",phoneCode:"+1",regions:[{name:"Ontario",areaCode:"416"},{name:"Quebec",areaCode:"418"},{name:"British Columbia",areaCode:"604"}]},{name:"Cape Verde",iso2:"CV",iso3:"CPV",phoneCode:"+238",regions:[]},{name:"Chile",iso2:"CL",iso3:"CHL",phoneCode:"+56",regions:[]},{name:"China",iso2:"CN",iso3:"CHN",phoneCode:"+86",regions:[]},{name:"Colombia",iso2:"CO",iso3:"COL",phoneCode:"+57",regions:[]},{name:"Costa Rica",iso2:"CR",iso3:"CRI",phoneCode:"+506",regions:[]},{name:"Croatia",iso2:"HR",iso3:"HRV",phoneCode:"+385",regions:[]},{name:"Cyprus",iso2:"CY",iso3:"CYP",phoneCode:"+357",regions:[]},{name:"Czech Republic",iso2:"CZ",iso3:"CZE",phoneCode:"+420",regions:[]},{name:"Denmark",iso2:"DK",iso3:"DNK",phoneCode:"+45",regions:[]},{name:"Dominican Republic",iso2:"DO",iso3:"DOM",phoneCode:"+1-809",regions:[]},{name:"Ecuador",iso2:"EC",iso3:"ECU",phoneCode:"+593",regions:[]},{name:"Egypt",iso2:"EG",iso3:"EGY",phoneCode:"+20",regions:[]},{name:"Estonia",iso2:"EE",iso3:"EST",phoneCode:"+372",regions:[]},{name:"Ethiopia",iso2:"ET",iso3:"ETH",phoneCode:"+251",regions:[]},{name:"Finland",iso2:"FI",iso3:"FIN",phoneCode:"+358",regions:[]},{name:"France",iso2:"FR",iso3:"FRA",phoneCode:"+33",regions:[]},{name:"Georgia",iso2:"GE",iso3:"GEO",phoneCode:"+995",regions:[]},{name:"Germany",iso2:"DE",iso3:"DEU",phoneCode:"+49",regions:[]},{name:"Greece",iso2:"GR",iso3:"GRC",phoneCode:"+30",regions:[]},{name:"Hong Kong",iso2:"HK",iso3:"HKG",phoneCode:"+852",regions:[]},{name:"Hungary",iso2:"HU",iso3:"HUN",phoneCode:"+36",regions:[]},{name:"Iceland",iso2:"IS",iso3:"ISL",phoneCode:"+354",regions:[]},{name:"India",iso2:"IN",iso3:"IND",phoneCode:"+91",regions:[]},{name:"Indonesia",iso2:"ID",iso3:"IDN",phoneCode:"+62",regions:[]},{name:"Iran",iso2:"IR",iso3:"IRN",phoneCode:"+98",regions:[]},{name:"Iraq",iso2:"IQ",iso3:"IRQ",phoneCode:"+964",regions:[]},{name:"Ireland",iso2:"IE",iso3:"IRL",phoneCode:"+353",regions:[]},{name:"Israel",iso2:"IL",iso3:"ISR",phoneCode:"+972",regions:[]},{name:"Italy",iso2:"IT",iso3:"ITA",phoneCode:"+39",regions:[]},{name:"Japan",iso2:"JP",iso3:"JPN",phoneCode:"+81",regions:[]},{name:"Jordan",iso2:"JO",iso3:"JOR",phoneCode:"+962",regions:[]},{name:"Kazakhstan",iso2:"KZ",iso3:"KAZ",phoneCode:"+7",regions:[]},{name:"Kenya",iso2:"KE",iso3:"KEN",phoneCode:"+254",regions:[]},{name:"Kuwait",iso2:"KW",iso3:"KWT",phoneCode:"+965",regions:[]},{name:"Kyrgyzstan",iso2:"KG",iso3:"KGZ",phoneCode:"+996",regions:[]},{name:"Latvia",iso2:"LV",iso3:"LVA",phoneCode:"+371",regions:[]},{name:"Lebanon",iso2:"LB",iso3:"LBN",phoneCode:"+961",regions:[]},{name:"Libya",iso2:"LY",iso3:"LBY",phoneCode:"+218",regions:[]},{name:"Lithuania",iso2:"LT",iso3:"LTU",phoneCode:"+370",regions:[]},{name:"Luxembourg",iso2:"LU",iso3:"LUX",phoneCode:"+352",regions:[]},{name:"Malaysia",iso2:"MY",iso3:"MYS",phoneCode:"+60",regions:[]},{name:"Mexico",iso2:"MX",iso3:"MEX",phoneCode:"+52",regions:[]},{name:"Moldova",iso2:"MD",iso3:"MDA",phoneCode:"+373",regions:[]},{name:"Morocco",iso2:"MA",iso3:"MAR",phoneCode:"+212",regions:[]},{name:"Nepal",iso2:"NP",iso3:"NPL",phoneCode:"+977",regions:[]},{name:"Netherlands",iso2:"NL",iso3:"NLD",phoneCode:"+31",regions:[]},{name:"New Zealand",iso2:"NZ",iso3:"NZL",phoneCode:"+64",regions:[]},{name:"Nigeria",iso2:"NG",iso3:"NGA",phoneCode:"+234",regions:[]},{name:"North Macedonia",iso2:"MK",iso3:"MKD",phoneCode:"+389",regions:[]},{name:"Norway",iso2:"NO",iso3:"NOR",phoneCode:"+47",regions:[]},{name:"Oman",iso2:"OM",iso3:"OMN",phoneCode:"+968",regions:[]},{name:"Pakistan",iso2:"PK",iso3:"PAK",phoneCode:"+92",regions:[]},{name:"Panama",iso2:"PA",iso3:"PAN",phoneCode:"+507",regions:[]},{name:"Peru",iso2:"PE",iso3:"PER",phoneCode:"+51",regions:[]},{name:"Philippines",iso2:"PH",iso3:"PHL",phoneCode:"+63",regions:[]},{name:"Poland",iso2:"PL",iso3:"POL",phoneCode:"+48",regions:[]},{name:"Portugal",iso2:"PT",iso3:"PRT",phoneCode:"+351",regions:[]},{name:"Qatar",iso2:"QA",iso3:"QAT",phoneCode:"+974",regions:[]},{name:"Romania",iso2:"RO",iso3:"ROU",phoneCode:"+40",regions:[]},{name:"Russia",iso2:"RU",iso3:"RUS",phoneCode:"+7",regions:[]},{name:"Saudi Arabia",iso2:"SA",iso3:"SAU",phoneCode:"+966",regions:[]},{name:"Serbia",iso2:"RS",iso3:"SRB",phoneCode:"+381",regions:[]},{name:"Singapore",iso2:"SG",iso3:"SGP",phoneCode:"+65",regions:[]},{name:"Slovakia",iso2:"SK",iso3:"SVK",phoneCode:"+421",regions:[]},{name:"Slovenia",iso2:"SI",iso3:"SVN",phoneCode:"+386",regions:[]},{name:"South Africa",iso2:"ZA",iso3:"ZAF",phoneCode:"+27",regions:[]},{name:"South Korea",iso2:"KR",iso3:"KOR",phoneCode:"+82",regions:[]},{name:"Spain",iso2:"ES",iso3:"ESP",phoneCode:"+34",regions:[]},{name:"Sri Lanka",iso2:"LK",iso3:"LKA",phoneCode:"+94",regions:[]},{name:"Sweden",iso2:"SE",iso3:"SWE",phoneCode:"+46",regions:[]},{name:"Switzerland",iso2:"CH",iso3:"CHE",phoneCode:"+41",regions:[]},{name:"Syria",iso2:"SY",iso3:"SYR",phoneCode:"+963",regions:[]},{name:"Taiwan",iso2:"TW",iso3:"TWN",phoneCode:"+886",regions:[]},{name:"Tajikistan",iso2:"TJ",iso3:"TJK",phoneCode:"+992",regions:[]},{name:"Thailand",iso2:"TH",iso3:"THA",phoneCode:"+66",regions:[]},{name:"Tunisia",iso2:"TN",iso3:"TUN",phoneCode:"+216",regions:[]},{name:"Turkey",iso2:"TR",iso3:"TUR",phoneCode:"+90",regions:[]},{name:"Turkmenistan",iso2:"TM",iso3:"TKM",phoneCode:"+993",regions:[]},{name:"Ukraine",iso2:"UA",iso3:"UKR",phoneCode:"+380",regions:[]},{name:"United Arab Emirates",iso2:"AE",iso3:"ARE",phoneCode:"+971",regions:[]},{name:"United Kingdom",iso2:"GB",iso3:"GBR",phoneCode:"+44",regions:[]},{name:"United States",iso2:"US",iso3:"USA",phoneCode:"+1",regions:[{name:"California",code:"CA",areaCodes:["+1-209","+1-213","+1-279","+1-310","+1-323","+1-408","+1-415","+1-424","+1-442","+1-510","+1-530","+1-559","+1-562"]},{name:"Texas",code:"TX",areaCodes:["+1-210","+1-214","+1-254","+1-281","+1-325"]},{name:"New York",code:"NY",areaCodes:["+1-212","+1-315","+1-332","+1-518","+1-585"]}]},{name:"Uzbekistan",iso2:"UZ",iso3:"UZB",phoneCode:"+998",regions:[]},{name:"Venezuela",iso2:"VE",iso3:"VEN",phoneCode:"+58",regions:[]},{name:"Vietnam",iso2:"VN",iso3:"VNM",phoneCode:"+84",regions:[]},{name:"Yemen",iso2:"YE",iso3:"YEM",phoneCode:"+967",regions:[]},{name:"Zimbabwe",iso2:"ZW",iso3:"ZWE",phoneCode:"+263",regions:[]}];function jt(i,t){if(i&1&&(o(0,"option",32),s(1),n()),i&2){let e=t.$implicit;m("value",e.name),l(),re(" ",e.name," (",e.phoneCode,") ")}}function Ht(i,t){if(i&1&&(o(0,"option",32),s(1),n()),i&2){let e=t.$implicit;m("value",e.name),l(),x(e.name)}}function zt(i,t){if(i&1){let e=b();o(0,"div",11)(1,"label"),s(2,"B\xF6lge / Eyalet"),n(),o(3,"select",33),f("change",function(a){h(e);let d=u();return C(d.onRegionChange(a.target.value))}),o(4,"option",14),s(5,"B\xF6lge se\xE7iniz..."),n(),p(6,Ht,2,2,"option",15),n()()}if(i&2){let e=u();l(6),m("ngForOf",e.regions)}}function $t(i,t){if(i&1&&(o(0,"option",32),s(1),n()),i&2){let e=t.$implicit;m("value",e),l(),x(e)}}function Kt(i,t){if(i&1){let e=b();o(0,"div",11)(1,"label"),s(2,"Telefon Alan Kodu"),n(),o(3,"select",34),f("change",function(a){h(e);let d=u();return C(d.selectedAreaCode=a.target.value)}),o(4,"option",14),s(5,"Se\xE7iniz..."),n(),p(6,$t,2,2,"option",15),n()()}if(i&2){let e=u();l(6),m("ngForOf",e.areaCodes)}}function Zt(i,t){if(i&1&&(Y(0),s(1),W()),i&2){let e=u();l(),v(" ",e.selectedAreaCode," ")}}function Yt(i,t){if(i&1&&s(0),i&2){let e=u();v(" ",e.selectedPhoneCode," ")}}function Wt(i,t){if(i&1&&(o(0,"option",32),s(1),n()),i&2){let e=t.$implicit;m("value",e.id),l(),v(" ",e.name," ")}}function Jt(i,t){i&1&&(o(0,"div",35),s(1," Parolalar e\u015Fle\u015Fmiyor. "),n())}function Qt(i,t){i&1&&(Y(0),s(1,"Kay\u0131t Ol"),W())}function Xt(i,t){i&1&&(c(0,"span",36),s(1," Kay\u0131t yap\u0131l\u0131yor... "))}var ve=class i{constructor(t,e,r,a){this.fb=t;this.auth=e;this.http=r;this.router=a}form;loading=!1;languages=[];countries=[];regions=[];areaCodes=[];selectedDialCode="";selectedAreaCode="";passwordStrength="";selectedPhoneCode;selectedCountry;ngOnInit(){this.form=this.fb.group({firstName:["",_.required],lastName:["",_.required],email:["",[_.required,_.email]],country:["",_.required],region:[""],phone:["",_.required],languageGroupId:["",_.required],password:["",_.required],confirmPassword:["",_.required]},{validators:this.passwordMatchValidator}),this.countries=Qe,this.loadLanguages(),this.detectCountryByIP(),this.form.get("password")?.valueChanges.subscribe(t=>{this.passwordStrength=this.checkPasswordStrength(t)})}loadLanguages(){this.http.get(`${S.apiUrl}/api/admin/language-groups`).subscribe({next:t=>{this.languages=t},error:t=>{console.error("\u274C Dil listesi y\xFCklenemedi:",t)}})}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{mismatch:!0}}checkPasswordStrength(t){if(!t)return"";let e=0;return t.length>=6&&e++,/[A-Z]/.test(t)&&e++,/[0-9]/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++,e<=1?"weak":e===2?"medium":"strong"}submit(){if(this.form.invalid)return;this.loading=!0;let t=this.selectedPhoneCode,e=this.selectedAreaCode,r=this.form.value.phone,a="";e?a=e.replace("-","")+r.replace(/\D/g,""):a=t+r.replace(/\D/g,"");let d=Te(Ee({},this.form.value),{phone:a,country:this.selectedCountry?.name??this.form.value.country});console.log("\u{1F4E4} Backend'e giden kay\u0131t payload:",d),this.auth.register(d).subscribe({next:T=>{this.router.navigate(["/customer/login"],{queryParams:{registered:"true"}})},error:T=>{console.error(T),this.loading=!1}})}detectCountryByIP(){fetch("https://ipapi.co/json/").then(t=>t.json()).then(t=>{t.country_name&&this.form.patchValue({country:t.country_name})}).catch(t=>console.warn("IP \xFClke tespiti yap\u0131lamad\u0131:",t))}onCountryChange(t){let e=this.countries.find(r=>r.name===t);e&&(this.selectedCountry=e,this.selectedPhoneCode=e.phoneCode,this.selectedDialCode=e.phoneCode,this.regions=e.regions??[],this.areaCodes=[],this.selectedAreaCode="",this.form.patchValue({region:"",phone:""}))}onRegionChange(t){let e=this.countries.find(a=>a.name===this.form.value.country);if(!e)return;let r=e.regions?.find(a=>a.name===t);this.areaCodes=r?.areaCodes??[],this.selectedAreaCode="",this.form.patchValue({region:t,phone:""})}static \u0275fac=function(e){return new(e||i)(g($),g(I),g(w),g(R))};static \u0275cmp=y({type:i,selectors:[["app-customer-register"]],standalone:!1,decls:62,vars:12,consts:[["countryPrefix",""],["loadingTpl",""],[1,"d-flex","justify-content-center","align-items-center","vh-100","bg-light"],[1,"card","p-4","shadow","register-card"],["src","logo.png","alt","Logo",1,"login-logo","mb-2"],[1,"text-center","text-success","mb-3"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6","mb-3"],["type","text","formControlName","firstName",1,"form-control"],["type","text","formControlName","lastName",1,"form-control"],[1,"mb-3"],["type","email","formControlName","email",1,"form-control"],["formControlName","country",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"input-group"],[1,"input-group-text"],[4,"ngIf","ngIfElse"],["type","text","formControlName","phone","placeholder","Telefon numaras\u0131",1,"form-control"],["formControlName","languageGroupId",1,"form-select"],[1,"mb-1"],["type","password","formControlName","password",1,"form-control"],[1,"password-strength"],[3,"ngClass"],[1,"mb-3","mt-3"],["type","password","formControlName","confirmPassword",1,"form-control"],["class","text-danger small",4,"ngIf"],[1,"btn","btn-success","w-100",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/customer/login"],[3,"value"],["formControlName","region",1,"form-select",3,"change"],[1,"form-select",3,"change"],[1,"text-danger","small"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(e,r){if(e&1){let a=b();o(0,"div",2)(1,"div",3),c(2,"img",4),o(3,"h6",5),s(4,"Yeni Hesap Olu\u015Ftur"),n(),o(5,"form",6),f("ngSubmit",function(){return h(a),C(r.submit())}),o(6,"div",7)(7,"div",8)(8,"label"),s(9,"Ad"),n(),c(10,"input",9),n(),o(11,"div",8)(12,"label"),s(13,"Soyad"),n(),c(14,"input",10),n()(),o(15,"div",11)(16,"label"),s(17,"E-posta"),n(),c(18,"input",12),n(),o(19,"div",11)(20,"label"),s(21,"\xDClke"),n(),o(22,"select",13),f("change",function(T){return h(a),C(r.onCountryChange(T.target.value))}),o(23,"option",14),s(24,"\xDClke se\xE7iniz..."),n(),p(25,jt,2,3,"option",15),n()(),p(26,zt,7,1,"div",16)(27,Kt,7,1,"div",16),o(28,"div",11)(29,"label"),s(30,"Telefon"),n(),o(31,"div",17)(32,"span",18),p(33,Zt,2,1,"ng-container",19)(34,Yt,1,1,"ng-template",null,0,O),n(),c(36,"input",20),n()(),o(37,"div",11)(38,"label"),s(39,"Tercih Edilen Dil"),n(),o(40,"select",21)(41,"option",14),s(42,"Dil se\xE7iniz..."),n(),p(43,Wt,2,2,"option",15),n()(),o(44,"div",22)(45,"label"),s(46,"Parola"),n(),c(47,"input",23),n(),o(48,"div",24),c(49,"span",25),n(),o(50,"div",26)(51,"label"),s(52,"Parola (Tekrar)"),n(),c(53,"input",27),p(54,Jt,2,0,"div",28),n(),o(55,"button",29),p(56,Qt,2,0,"ng-container",19)(57,Xt,2,0,"ng-template",null,1,O),n(),o(59,"div",30)(60,"a",31),s(61,"Hesab\u0131n\u0131z var m\u0131? Giri\u015F yap\u0131n"),n()()()()()}if(e&2){let a,d=M(35),T=M(58);l(5),m("formGroup",r.form),l(20),m("ngForOf",r.countries),l(),m("ngIf",r.regions.length>0),l(),m("ngIf",r.areaCodes.length>0),l(6),m("ngIf",r.selectedAreaCode)("ngIfElse",d),l(10),m("ngForOf",r.languages),l(6),m("ngClass",r.passwordStrength),l(5),m("ngIf",(r.form.errors==null?null:r.form.errors.mismatch)&&((a=r.form.get("confirmPassword"))==null?null:a.touched)),l(),m("disabled",r.form.invalid||r.loading),l(),m("ngIf",!r.loading)("ngIfElse",T)}},dependencies:[se,V,A,G,H,z,F,j,q,B,U,L,K],styles:[".register-card[_ngcontent-%COMP%]{width:100%;max-width:460px;border-radius:14px;background:#fff;padding:28px;animation:_ngcontent-%COMP%_fadeIn .3s ease}.login-logo[_ngcontent-%COMP%]{width:220px;display:block;margin:0 auto 10px;opacity:.95}label[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:8px;padding:10px 12px;font-size:14px}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;border-radius:8px 0 0 8px}.password-strength[_ngcontent-%COMP%]{margin-top:6px}.password-strength[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;height:4px;border-radius:2px}.password-strength[_ngcontent-%COMP%]   .weak[_ngcontent-%COMP%]{background:#dc3545}.password-strength[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{background:#f0ad4e}.password-strength[_ngcontent-%COMP%]   .strong[_ngcontent-%COMP%]{background:#28a745}button.btn-success[_ngcontent-%COMP%]{padding:10px 0;font-size:15px;font-weight:600;border-radius:8px}a[_ngcontent-%COMP%]{font-size:14px;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(max-width:480px){.register-card[_ngcontent-%COMP%]{padding:20px;margin:0 12px}.login-logo[_ngcontent-%COMP%]{width:180px}}"]})};var _e=class i{constructor(t,e){this.auth=t;this.router=e}canActivate(){return this.auth.token?!0:this.router.parseUrl("/customer/login")}static \u0275fac=function(e){return new(e||i)(P(I),P(R))};static \u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})};var ei=[{path:"login",component:Ce},{path:"register",component:ve},{path:"",component:me,canActivate:[_e],children:[{path:"dashboard",component:de},{path:"requests",component:pe},{path:"requests/new",component:he},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"**",redirectTo:"login"}],be=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ie({type:i});static \u0275inj=te({imports:[J.forChild(ei),J]})};var Xe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ie({type:i});static \u0275inj=te({providers:[{provide:Ge,useClass:We,multi:!0}],imports:[Ve,Ue,je,J,be,Ye]})};export{Xe as CustomerModule};
